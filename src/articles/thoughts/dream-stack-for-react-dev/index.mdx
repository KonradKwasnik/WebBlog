---
cdate: 2023-02-28
mdate: 2023-02-28
tbcdate: 2023-03-06
authorId: polubis
treviewerId: kwozniak
lreviewerId: kreszko
tags: architecture,project setup,patterns,quality gates
stack: typescript,react,rxjs,nx,cypress,jest,storybook,chromatic,redux,styled-components,next
description: It will be a longer article about project setup. Prepare a huge mug of coffee before you start reading.
readTime: 10
title: Dream stack for React dev
---

<Prelude>
  <M>Developers could work on functionalities. Did I say something weird?</M>
  <M>
    Many of you may disagree here. What about creating a project? What about
    connecting <B>eslint</B>, <B>prettier</B>? What about preparing a test
    environment for <B>unit</B> and <B>e2e</B> tests? Seems like a lot of work.
    Honestly, it may be...
  </M>
  <M>
    However, today you'll see how you can do it easier/better/faster/stronger
    üéß.
  </M>
  <Hint hasBg>
    Here is a{" "}
    <A outside href="https://github.com/polubis/Dream-stack-for-React-dev/">
      final result
    </A>
    . Don't be afraid, just use it :0.
  </Hint>
</Prelude>

<Section>
  <XL>1. Monorepo</XL>
  <M>
    We will divide our solution into <B>applications</B> and <B>libraries</B>.
    All of these we'll store in single repository with same configuration for
    linting, formatting, TypeScript, jest, cypress, storybook, ...etc.
  </M>
  <M>
    We will have the opportunity to run these applications separately or
    together. In addition, we will get the ability to easily track commits in
    git, change the entire system in an easy way and give developers access to
    all applications with a single click.
  </M>
  <M>
    This is what you can achieve with <B>monorepo</B>. Maybe the definition is
    not bookish. It is a way to store applications, libraries, configurations in
    one repository.
  </M>
  <Hint hasBg>That's enough for now...</Hint>
</Section>

<Section>
  <XL>2. Monorepo with nx</XL>
  <M>
    It's mainly a <B>CLI</B> with <B>scripts</B> and <B>patterns</B> which helps
    you to create and organize an applications with their libraries. Below is a
    list of cool things you will get with this technology:
  </M>
  <List items="apps and libs generation via CLI,organized structure,option to configure stuff like storybook via one command,dependency preview via graph,same configs for everything,configuration of TypeScript,option to choose way of styling your components,routing configuration,bundler configuration, unit and e2e tests configuration" />
  <M>
    That's just a part of things. I encourage you to check the{" "}
    <A outside href="https://nx.dev/getting-started/intro/">
      documentation
    </A>{" "}
    to see all pros.
  </M>
</Section>

<Section>
  <XL>3. What we'll create?</XL>
  <M>
    It will be a solution that allows you to manage your blog and display
    articles/tutorials. So let's describe the components:
  </M>
  <List items="application for presenting the blog content and homepage,a blog management application,library for communicating with the API,utils library,a library with components" />
  <M>
    Each component will be independent. This will give the possibility of easier
    replacement in the future or independent, simultaneous work.
  </M>
  <Img
    border
    src="/assets/dream-stack-for-react-dev/graph.png"
    description="Building blocks"
  />
</Section>

<Section>
  <XL>4. Creating applications</XL>
  <M>
    Before we start you need to make sure that you have installed the script
    that initializes the <B>nx repository</B>. Type in your command line in git
    repository:{" "}
  </M>
  <Hint hasBg>npm i -g create-nx-workspace@latest --legacy-peer-deps</Hint>
  <M>It will install script package globally. Later you need to type: </M>
  <Hint hasBg>npx create-nx-workspace@latest</Hint>
  <M>
    The above command will start creating the project. The CLI will ask you one
    by one what you want to get. I'll skip describing the options, you can find
    them in{" "}
    <A outside href="https://nx.dev/getting-started/intro/">
      nx documentation
    </A>
    . Let's focus on creating our dream project.
  </M>
  <M>Answer the question the same way I did.</M>
  <Img
    border
    src="/assets/dream-stack-for-react-dev/questions.jpg"
    description="Questions and answers"
  />
  <M>
    The file and folder structure generated by nx should look more or less like
    this:
  </M>
  <Img
    border
    src="/assets/dream-stack-for-react-dev/folders-and-files.jpg"
    description="Generated content for blog application"
  />
  <M>
    If you look at it you will see that by default you have <B>TypeScript</B>,{" "}
    <B>prettier</B> and <B>eslint</B> configured. In addition, tests in{" "}
    <B>jest</B> have been configured and e2e in <B>cypress</B>.
  </M>
  <M>
    We already have an app in <B>Next.js</B>, now it's time for the{" "}
    <B>single page application in React</B>, in which we will also use{" "}
    <B>styled-components</B>.
  </M>
  <Hint hasBg>cd .\system\</Hint>
  <Hint hasBg>npx nx g @nrwl/react:application blog-creator</Hint>
  <M>
    The tool may ask you to install additional dependencies - just confirm it.
    These will be the developer dependencies needed for <B>nx</B> to generate
    more stuff. After typing these commands, you will see similar questions as
    before. Answer them the same way I did:
  </M>
  <Img
    border
    src="/assets/dream-stack-for-react-dev/react-questions.jpg"
    description="React questions answered"
  />
  <M>
    We have an apps! After a while you should see two new folders in the{" "}
    <B>apps</B> directory.
  </M>
  <Hint hasBg>
    In this nice looking{" "}
    <A
      outside
      href="https://github.com/polubis/Dream-stack-for-React-dev/commit/25d239e6698c6d862afbff6fa481e784ca1b1a5e/"
    >
      commit
    </A>{" "}
    you have current progress.
  </Hint>
</Section>

<Section>
  <XL>5. Creating libraries</XL>
  <M>
    The idea is the same just questions and answers are different. It's
    beautiful... ‚ù§Ô∏è
  </M>
  <M>
    Make sure you are in the directory where the <B>nx.json</B> file is located
    and type the command:{" "}
  </M>
  <Hint hasBg>npx nx g @nrwl/react:lib figa-ui</Hint>
  <M>
    I named my component library after my beloved cat - <B>Figa</B>, you can
    name it after a turtle or whatever you have at home. Answer as I did:
  </M>
  <Img
    border
    src="/assets/dream-stack-for-react-dev/ui-lib-setup.jpg"
    description="You have figa-ui installed :D"
  />
  <M>
    Now you probably have a new folder with the name of the library which we
    created. Now it's time to do the two simplest things. Generate pure{" "}
    <B>TypeScript</B> libraries for <B>utils</B> and <B>API connection</B>. Type
    the following two commands:
  </M>
  <Hint hasBg>npx nx generate @nrwl/js:lib utils</Hint>
  <Hint hasBg>npx nx generate @nrwl/js:lib blog-api</Hint>
  <M>In both cases, choose the same answers:</M>
  <Img
    border
    src="/assets/dream-stack-for-react-dev/pure-ts-lib-answers.jpg"
    description="TypeScript libs are cool"
  />
  <M>
    Now you have two more folders, in my case it's <B>utils</B> and{" "}
    <B>blog-api</B> in the libs directory. We have what we wanted, so let's move
    on.
  </M>
  <Hint hasBg>
    In this nice looking{" "}
    <A
      outside
      href="https://github.com/polubis/Dream-stack-for-React-dev/commit/5021144480bb788155a6cee17699a62ec5b5a74d/"
    >
      commit
    </A>{" "}
    you have current progress.
  </Hint>
</Section>

<Section>
  <XL>6. Adding storybook to UI library</XL>
  <M>
    <B>Storybook</B> will be needed for our component library. <B>Nx</B> allows
    per scope configuration or global one. We need scoped. So let's enter some
    commands:
  </M>
  <Hint hasBg>npm i --save @nrwl/storybook --legacy-peer-deps</Hint>
  <Hint hasBg>
    npx nx g @nrwl/storybook:configuration figa-ui
    --uiFramework=@storybook/react
  </Hint>
  <M>As usual there will be questions, answer as I did:</M>
  <Img
    border
    src="/assets/dream-stack-for-react-dev/storybook-answers.jpg"
    description="Components UI documentation ready!"
  />
  <M>
    Firstly, we installed the configuration generator package for the{" "}
    <B>storybook</B>, and then we generated configurations only for the
    components library, not the entire repository.
  </M>
  <M>
    Now you can start the storybook process and play with it via this command:
  </M>
  <Hint hasBg>npx nx run figa-ui:storybook</Hint>
  <M>
    After a while, the <B>storybook window</B> will launch with the message that
    you don't have any story yet. We'll add the <B>Bell.tsx</B> and{" "}
    <B>Bell.stories.tsx</B> component to see if everything works as it should.
  </M>
  <Img
    src="/assets/dream-stack-for-react-dev/storybook-works.jpg"
    description="It works!"
  />
  <Hint hasBg>
    In this nice looking{" "}
    <A
      outside
      href="https://github.com/polubis/Dream-stack-for-React-dev/commit/2bcf4873c2592b032015a24f3485c314230b6118/"
    >
      commit
    </A>{" "}
    you have current progress.
  </Hint>
</Section>

<Section>
  <XL>7. Running the applications</XL>
  <M>
    Now it begins :D. You can run all applications, one of them, or just an
    storybook for UI components. It depends what kind of feature you are already
    working on.
  </M>
  <M>Running single app:</M>
  <Hint hasBg>npx nx serve blog</Hint>
  <M>You can run all apps via: </M>
  <Hint hasBg>
    npx nx run-many --parallel --target=serve --projects=blog,blog-creator
  </Hint>
  <M>or:</M>
  <Hint hasBg>npx nx run-many --target=serve --all</Hint>
  <M>
    You can get an error about same port usage attempt. To fix it you need to
    visit <B>project.json</B> files and just add port number. For each
    application different one and it will work.
  </M>
  <M>When you type again:</M>
  <Hint hasBg>npx nx run-many --target=serve --all</Hint>
  <M>
    applications will be served on different ports, in my case <B>3001</B> and{" "}
    <B>3002</B>. Looks cool? Yea!
  </M>
  <Hint hasBg>
    In this nice looking{" "}
    <A
      outside
      href="https://github.com/polubis/Dream-stack-for-React-dev/commit/3cd43866db3fe6c780dabb322bba7ba9ff5ac856/"
    >
      commit
    </A>{" "}
    you have current progress.
  </Hint>
</Section>

<Section>
  <XL>8. Using libraries</XL>
  <M>
    Look now. Want to use a component library in two different applications?
    Forget about <B>npm install</B>. All you need is a simple import statement.
  </M>
  <Code
    src="/snippets/dream-stack-for-react-dev/how-to-import.tsx"
    description="The power of monorepo and nx"
  />
  <M>Who cares about configuring aliases for webpack? Certainly not you :D</M>
  <Hint hasBg>
    In this nice looking{" "}
    <A
      outside
      href="https://github.com/polubis/Dream-stack-for-React-dev/commit/eb157141da07fc66219ef3bbfa76f5784f7062df/"
    >
      commit
    </A>{" "}
    you have current progress.
  </Hint>
</Section>

<Section>
  <XL>9. Adding support for custom fonts</XL>
  <M>I will appear here in next week... :).</M>
</Section>

<Section>
  <XL>10. Adding husky</XL>
  <M>I will appear here in next week... :).</M>
</Section>

<Section>
  <XL>11. Adding chromatic</XL>
  <M>I will appear here in next week... :).</M>
</Section>

<Section>
  <XL>12. CI&CD</XL>
  <M>I will appear here in next week... :).</M>
</Section>

<Section>
  <XL>13. State management</XL>
  <M>I will appear here in next week... :).</M>
</Section>

<Section>
  <XL>14. Adding code style and standards document</XL>
  <M>I will appear here in next week... :).</M>
</Section>

<Section>
  <XL>15. Architecture design and documentation</XL>
  <M>I will appear here in next week... :).</M>
</Section>

<Section>
  <XL>16. Additional tools and libraries</XL>
  <M>I will appear here in next week... :).</M>
</Section>

<Example>
  <M>
    <A href="https://github.com/polubis/Dream-stack-for-React-dev/" outside>
      Repository
    </A>{" "}
    to play with.
  </M>
</Example>

<Summary>
  <M>
    I tell you right away, this is going to be a huge article, but don't worry
    at the end you will have great starter for future projects.
  </M>
  <M>
    We went through the wonderful tool together. I recommend playing with it. We
    have described only a part of the possibilities.
  </M>
  <M>
    Feel free to contact me if you have any questions/proposals. Have a nice day
    and good health!
  </M>
</Summary>
