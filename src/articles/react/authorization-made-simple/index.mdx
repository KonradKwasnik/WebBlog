---
cdate: 2023-04-24
mdate: 2023-04-24
authorId: kwozniak
treviewerId: polubis
lreviewerId: kreszko
stack: typescript,react
tags: hooks,authorization
description: Short and simple on the topic of authorization in React, so as not to get hung up on it.
readTime: 4
title: Authorization made simple
---

<Prelude>
  <M>
    <B>Authentication</B> is one of the more common functionalities when it
    comes to web applications. Checking whether a user is currently logged in
    generates a lot of code, which in most cases is not very different. Using
    this problem as an example, we will show how to write a simple hook for
    authentication, which will be the only source of truth 📖 and will be used
    to build reusable components 🧩.
  </M>
</Prelude>

<Section>
  <XL>2. Utils</XL>
  <M>
    To fully illustrate the problem, we will use the prepared login 🔑 mockup.
    The following function waits 3s and then simulates a BE query that returns a
    flag.
  </M>
  <Snippet
    description="Login endpoint mock"
    linesCount={15}
    src="https://raw.githubusercontent.com/ajronn/useAuth/main/src/mocks/index.ts"
  />
</Section>

<Section>
  <XL>3. useAuth</XL>
  <M>
    So we create a <B>provider</B> that will hold information via the{" "}
    <B>context</B>
    whether the user is already correctly authorized. The function starts by asking
    BE about the login. The result is stored in the state. Of course, this action
    can happen in a separate site which would be good practice 👌.
  </M>
  <Snippet
    description="useAuth provider and hook"
    linesCount={26}
    src="https://raw.githubusercontent.com/ajronn/useAuth/main/src/useAuth/index.tsx"
  />
</Section>

<Section>
  <XL>4. Guards</XL>
  <M>
    As we mentioned our custom hook will be used to implement <B>reusable</B>{" "}
    components. We will now write two guards 💂‍♂️ that, depending on the flag
    stored in the provider, will render (or not) part of the layout.
  </M>
  <Snippet
    description="Guards"
    linesCount={13}
    src="https://raw.githubusercontent.com/ajronn/useAuth/main/src/guards/index.tsx"
  />
</Section>

<Section>
  <XL>5. Use case</XL>
  <M>
    It's time for a use case example. We will use the default layout rendered
    with <B>create-react-app</B>.
  </M>
  <Snippet
    description="Guards"
    linesCount={37}
    src="https://raw.githubusercontent.com/ajronn/useAuth/main/src/App.tsx"
  />
  <M>
    As you can see, hiding or showing parts of the layout is trivial 🤡 from now
    on and reusable anywhere in the application. Of course, let's not forget
    that we need to use our provider in the parent component 😉.
  </M>
</Section>
